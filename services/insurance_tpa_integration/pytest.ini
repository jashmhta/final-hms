[pytest]
DJANGO_SETTINGS_MODULE = insurance_tpa.settings_integration
python_files = tests.py test_*.py *_tests.py
addopts = -v --tb=short --strict-markers --disable-warnings --cov=insurance_tpa --cov-report=term-missing --cov-fail-under=90

# Django specific
reuse_db = True
parallelize = auto

testpaths = tests
python_classes = Test*
python_functions = test_*

# Markers
markers =
    unit: marks tests as unit tests
    integration: marks tests as integration tests
    slow: marks tests as slow (deselect with -m "not slow")

# Coverage
cov_fail_under = 90
cov_report = term-missing

# Test database
sqlite_memory = True

# Verbosity and output
verbose = 2

# Filtering
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Plugins
addopts = --reuse-db --ds=insurance_tpa.settings_integration --cov=insurance_tpa --cov-report=term-missing --cov-fail-under=90

# Warnings
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

# Timeouts
addopts = --durations=10 --timeout=30

[tool:pytest]
addopts = --cov=insurance_tpa --cov-report=term-missing --cov-fail-under=90

# Django configuration
DJANGO_SETTINGS_MODULE = insurance_tpa.settings_integration
reuse_db = True

# Coverage configuration
[tool:coverage:run]
source = insurance_tpa
omit =
    */migrations/*
    */tests/*
    */settings/*
    manage.py

[tool:coverage:report]
show_missing = True
fail_under = 90

[tool:coverage:html]
directory = htmlcov
